% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ATL08_terrain_dt_gridStat.R
\name{ATL08_terrain_dt_gridStat}
\alias{ATL08_terrain_dt_gridStat}
\title{Statistics of ATL08 terrain attributes at grid level}
\usage{
ATL08_terrain_dt_segStat(atl03_atl08_dt, func, res)
}
\arguments{
\item{func}{The function to be applied for computing the defined statistics}

\item{res}{Spatial resolution in decimal degrees for the output SpatRast raster layer. Default is 0.5.}

\item{ATL08_terrain_dt}{An S4 object of class [rICESat2Veg::icesat2.atl08_dt] containing ATL08 data
(output of [rICESat2Veg::ATL08_terrain_attributes_dt()] or [rICESat2Veg::ATL08_terrain_dt_segStat()] functions).}
}
\value{
Return a SpatRast raster layer(s) of selected ATL08 terrain attribute(s)
}
\description{
This function computes a series of user defined descriptive statistics within
each given grid cell for ATL08 terrain attributes
}
\examples{

# Specifying the path to ATL08 file (zip file)
outdir = tempdir()

atl08_zip <- system.file("extdata",
                  "ATL08_20220401221822_01501506_005_01.zip",
                  package="rICESat2Veg")

# Unzipping ATL08 file
atl08_path <- unzip(atl08_zip,exdir = outdir)

# Reading ATL08 data (h5 file)

# Extracting ATL03 and ATL08 photons and heights
atl08_terrain_dt<-ATL08_terrain_attributes(atl08_h5)
head(atl08_terrain_dt)

# Computing the mean h_te_best_fit at 30 m grid cell
mean_h_terrain <-ATL08_terrain_dt_gridStat(atl08_terrain_dt, func=mean(h_terrain), res=0.5)

plot(top_terrain)

# Define your own function
mySetOfMetrics <- function(x) {
  metrics <- list(
    min = min(x), # Min of x
    max = max(x), # Max of x
    mean = mean(x), # Mean of x
    sd = sd(x) # Sd of x
  )
  return(metrics)
}

# Computing a series of h_te_best_fit statistics at 30 m grid cellfrom customized function
h_terrain_metrics <-ATL08_terrain_dt_gridStat(atl08_terrain_dt, func=mySetOfMetrics(h_te_best_fit),res=0.5)

plot(h_terrain_metrics)

close(atl03_h5)
close(atl08_h5)
}
