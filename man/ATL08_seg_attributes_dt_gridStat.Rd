% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ATL08_seg_attributes_dt_gridStat.R
\name{ATL08_seg_attributes_dt_gridStat}
\alias{ATL08_seg_attributes_dt_gridStat}
\title{Statistics of ATL08 Terrain and Canopy Attributes at grid level}
\usage{
ATL08_seg_attributes_dt_gridStat(atl08_seg_att_dt, func, res)
}
\arguments{
\item{atl08_seg_att_dt}{An S4 object of class \link{icesat2.atl08_dt} containing ATL08 data
(output of \code{\link[=ATL08_seg_attributes_dt]{ATL08_seg_attributes_dt()}} functions).}

\item{func}{The function to be applied for computing the defined statistics}

\item{res}{Spatial resolution in decimal degrees for the output SpatRast raster layer. Default is 0.5.}
}
\value{
Return a SpatRast raster layer(s) of selected ATL08 terrain and canopy attribute(s)
}
\description{
This function computes a series of user defined descriptive statistics within
each grid cell for ATL08 Terrain and Canopy Attributes
}
\examples{

# Specifying the path to ATL08 file (zip file)
outdir <- tempdir()

atl08_zip <- system.file("extdata",
  "ATL08_20220401221822_01501506_005_01.zip",
  package = "ICESat2VegR"
)

# Unzipping ATL08 file
atl08_path <- unzip(atl08_zip, exdir = outdir)

# Reading ATL08 data (h5 file)

# Extracting ATL08 terrain and canopy attributes
atl08_seg_att_dt <- ATL08_seg_attributes_dt(atl08_h5)
head(atl08_seg_att_dt)

# Computing the top h_canopy at 0.05 degree grid cell
max_h_canopy <- ATL08_seg_attributes_dt_gridStat(atl08_seg_att_dt, func = max(h_canopy), res = 0.5)

plot(max_h_canopy, xlim = c(-107.5, -106.5), ylim = c(38, 39))

# Define your own function
mySetOfMetrics <- function(x) {
  metrics <- list(
    min = min(x), # Min of x
    max = max(x), # Max of x
    mean = mean(x), # Mean of x
    sd = sd(x) # Sd of x
  )
  return(metrics)
}

# Computing a series of h_canopy statistics at 0.05 degree grid cell from customized function
h_canopy_metrics <- ATL08_seg_attributes_dt_gridStat(atl08_seg_att_dt, func = mySetOfMetrics(h_canopy), res = 0.05)

plot(h_canopy_metrics, xlim = c(-107.5, -106.5), ylim = c(38, 39))

close(atl03_h5)
close(atl08_h5)
}
