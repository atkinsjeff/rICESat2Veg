% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/clip.R
\name{clip}
\alias{clip}
\title{Generic function for clipping ICESat-2 ATL03 and ATL08 H5 data}
\usage{
clip(x, output, clip_obj, ...)
}
\arguments{
\item{x}{\code{\linkS4class{icesat2.atl03_h5}} or \code{\linkS4class{icesat2.atl08_h5}} object,
obtained through \code{\link[=ATL03_read]{ATL03_read()}} or \code{\link[=ATL08_read]{ATL08_read()}} for clipping}

\item{output}{character. Path to the output h5 file.}

\item{clip_obj}{\code{\linkS4class{numeric}}, \code{\link[terra:SpatExtent-class]{terra::SpatExtent}} or \code{\link[terra:SpatVector-class]{terra::SpatVector}}
object for clipping. The bbox order is the default from NASA's ICESat-2 CMS searching:
\link{ul_lat, ul_lon, lr_lat, lr_lon}.}
}
\value{
Returns the clipped S4 object of the same class as input
}
\description{
This function clips ATL03 and ATL08 HDF5 file within beam groups,
but keeps metada and ancillary data the same.
This function will dispatch to one of the specifics functions for clipping.
}
\examples{
# Specifying the path to ATL03 file (zip file)
outdir <- tempdir()
atl03_zip <- system.file("extdata",
  "atl03_20220401221822_01501506_005_01.zip",
  package = "ICESat2VegR"
)

# Unzipping ATL03 file
atl03_path <- unzip(atl03_zip, exdir = outdir)

# Reading ATL03 data (h5 file)
atl03_h5 <- atl03_read(atl03_path = atl03_path)

output <- file.path(outdir, "clipped.h5")

vect_path <- system.file("extdata",
  "polygons.shp",
  package = "ICESat2VegR"
)

vect <- terra::vect(vect_path)
ext <- terra::ext(vect)

# Clipping ATL03 photons by boundary box extent
atl03_clip <- clip(
  atl03_h5,
  output,
  ext
)

close(atl03_clip)

# Clipping ATL03 photons by geometry
atl03_clip_geom <- clip(
  atl03_h5,
  output,
  vect,
  polygon_id = "id"
)

lapply(atl03_clip_geom, close)
}
\seealso{
\code{\link[=ATL03_h5_clipBox]{ATL03_h5_clipBox()}}, \code{\link[=ATL03_h5_clipGeometry]{ATL03_h5_clipGeometry()}},
\code{\link[=ATL08_h5_clipBox]{ATL08_h5_clipBox()}}, \code{\link[=ATL08_h5_clipGeometry]{ATL08_h5_clipGeometry()}}
}
